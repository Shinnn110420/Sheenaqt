<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Secret Love â€” For Sheena</title>
    <style>
        :root {
            --pink-strong: #ff4f9c;
            --pink-soft: #ffddeb;
            --bg1: #ffd1e6;
            --bg2: #ffe7f4;
            --muted: #6b6b6b;
            --white: #ffffff;
        }

        * {
            box-sizing: border-box
        }

        html,
        body {
            height: 100%;
            margin: 0;
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
            -webkit-font-smoothing: antialiased;
        }

        body {
            background: radial-gradient(1200px 400px at 10% 20%, rgba(255, 244, 249, 0.35), transparent 15%),
                radial-gradient(800px 300px at 85% 80%, rgba(255, 228, 240, 0.28), transparent 10%),
                linear-gradient(160deg, #ffdbe9 0%, #ffeef8 40%, #fff7fb 100%);
            color: #222;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 28px;
        }

        /* container for each page: centered column */
        .screen {
            width: 100%;
            max-width: 860px;
            background: transparent;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            min-height: 70vh;
        }

        .card {
            width: 100%;
            max-width: 520px;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 18px;
            padding: 20px 22px;
            box-shadow: 0 12px 30px rgba(20, 20, 20, 0.08);
            text-align: center;
        }

        h1,
        h2,
        h3 {
            margin: 0
        }

        .small {
            color: var(--muted);
            font-size: 14px
        }

        /* PAGE 1 styles */
        #page1 .title {
            font-size: 20px;
            font-weight: 800;
            color: #222;
            margin-bottom: 14px;
        }

        .code-input {
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
        }

        input[type="password"] {
            flex: 1;
            padding: 12px 14px;
            border-radius: 12px;
            border: 1px solid rgba(0, 0, 0, 0.06);
            font-size: 16px;
            outline: none;
            box-shadow: none;
        }

        /* Button: white inside, pink outline, pink text, slight shadow, hover glow */
        .btn-outline {
            background: var(--white);
            color: var(--pink-strong);
            border: 2px solid var(--pink-strong);
            padding: 10px 16px;
            border-radius: 12px;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 8px 18px rgba(255, 79, 156, 0.08);
            transition: transform 150ms ease, box-shadow 150ms ease;
        }

        .btn-outline:hover {
            transform: translateY(-3px);
            box-shadow: 0 18px 40px rgba(255, 79, 156, 0.12);
            filter: drop-shadow(0 8px 18px rgba(255, 79, 156, 0.10));
        }

        .i-love {
            margin-top: 14px;
            font-weight: 700;
            color: var(--pink-strong);
            font-size: 15px;
            text-shadow: 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        /* WRONG CODE banner at top center */
        .banner {
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            top: 18px;
            background: var(--white);
            color: var(--pink-strong);
            border: 2px solid rgba(255, 79, 156, 0.14);
            padding: 10px 16px;
            border-radius: 14px;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
            display: none;
            z-index: 9999;
            font-weight: 800;
        }

        /* PAGE 2 (Carousel) */
        #page2 {
            display: none;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
        }

        .our-picture {
            font-size: 2.2rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
            color: #ff4d79 !important;
        }

        .carousel-wrap {
            position: relative;
            width: 100%;
            max-width: 820px;
            height: 420px;
            border-radius: 16px;
            overflow: hidden;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.06), rgba(255, 250, 250, 0.02));
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 14px 40px rgba(0, 0, 0, 0.06);
        }

        .slides {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slide {
            position: absolute;
            width: 86%;
            height: 86%;
            border-radius: 12px;
            overflow: hidden;
            opacity: 0;
            transform: scale(0.98);
            transition: opacity 700ms ease, transform 700ms ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slide img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            /* instead of cover */
            display: block;
            transition: transform 350ms ease;
            background: #fff;
            /* para clean kapag portrait/square pic */
            padding: 6px;
            /* optional, para may breathing room */
        }

        .slide.show {
            opacity: 1;
            transform: scale(1);
            z-index: 2;
        }

        .slide img:hover {
            transform: scale(1.04);
        }

        /* small indicators bottom */
        .indicators {
            display: flex;
            gap: 8px;
            position: absolute;
            bottom: 18px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 6;
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            border: 2px solid rgba(255, 79, 156, 0.08);
            cursor: pointer;
        }

        .dot.active {
            background: var(--white);
            box-shadow: 0 10px 26px rgba(255, 79, 156, 0.12);
        }

        /* overlay notification (centered, white with pink border, rounded big) */
        .overlay {
            position: absolute;
            z-index: 8;
            width: 76%;
            max-width: 520px;
            padding: 20px;
            background: var(--white);
            border-radius: 18px;
            border: 2px solid rgba(255, 79, 156, 0.18);
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.10);
            transform: translateY(-10px) scale(0.96);
            opacity: 0;
            transition: all 360ms cubic-bezier(.2, .9, .3, 1);
        }

        .overlay.show {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .overlay h3 {
            margin: 0;
            font-size: 20px;
            font-weight: 900;
            color: var(--pink-strong);
        }

        .overlay p {
            color: var(--muted);
            margin: 8px 0 14px 0;
        }

        .overlay .start {
            display: inline-block;
        }

        /* Carousel nav arrows */
        .arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 9;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            padding: 8px;
            box-shadow: 0 10px 26px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            border: 1px solid rgba(255, 79, 156, 0.06);
        }

        .arrow.left {
            left: 16px;
        }

        .arrow.right {
            right: 16px;
        }

        /* Page 3 (music + short msg) */
        #page3 {
            display: none;
            width: 100%;
            max-width: 720px;
            padding: 18px;
        }

        .music-card {
            background: rgba(255, 255, 255, 0.06);
            border-radius: 12px;
            padding: 12px;
            color: #222;
        }

        .music-embed {
            width: 100%;
            max-width: 680px;
            height: 80px;
            border-radius: 8px;
            border: none;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .short-msg {
            margin-top: 10px;
            color: #222;
            font-size: 16px;
            white-space: pre-wrap;
            text-align: left;
        }

        .next-bottom {
            display: inline-block;
            margin-top: 18px;
            padding: 10px 18px;
            background: var(--white);
            color: var(--pink-strong);
            border: 2px solid var(--pink-strong);
            border-radius: 12px;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 10px 26px rgba(255, 79, 156, 0.06);
        }

        /* Page 4 final */
        #page4 {
            display: none;
            width: 100%;
            max-width: 760px;
            padding: 22px;
        }

        .final-card {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 14px;
            padding: 22px;
            box-shadow: 0 16px 40px rgba(0, 0, 0, 0.08);
            text-align: left;
        }

        .final-title {
            font-size: 22px;
            font-weight: 900;
            color: var(--pink-strong);
            margin-bottom: 10px;
            text-align: center;
        }

        .typewriter {
            font-size: 17px;
            color: #333;
            white-space: pre-wrap;
            min-height: 160px;
            line-height: 1.6;
        }

        /* Responsive */
        @media (max-width:820px) {
            .carousel-wrap {
                height: 360px;
            }

            .overlay {
                width: 86%;
            }
        }

        @media (max-width:520px) {
            .card {
                padding: 16px;
                border-radius: 12px;
            }

            .overlay {
                width: 92%;
                padding: 14px;
            }

            .slide {
                width: 94%;
                height: 86%;
            }

        }
    </style>
</head>

<body>

    <div class="bg-animation-global"></div>
    <!-- Wrong code banner -->
    <div id="banner" class="banner">Oops!!! Wrong Secret Code, Baby ðŸ’—</div>

    <!-- SCREEN WRAPPER -->
    <div id="app" class="screen">

        <!-- PAGE 1 -->
        <section id="page1" class="card" aria-labelledby="p1title">
            <div class="title" id="p1title">Enter the secret code</div>
            <div class="small" style="margin-top:10px; color:var(--muted)">Type carefully, baby :)</div>

            <div class="code-input" style="margin-top:18px;">
                <input id="codeInput" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="off"
                    aria-label="Secret code" />
            </div>

            <div class="i-love">I love you Sheena ðŸ’—</div>

            <div style="margin-top:18px; display:flex; justify-content:center;">
                <button id="enterBtn" class="btn-outline" aria-label="Enter secret code">Enter</button>
            </div>
        </section>

        <!-- PAGE 2 -->
        <section id="page2" class="">
            <h1 class="our-picture-title">Our Picture</h1>

            <div class="carousel-wrap">
                <div class="slides" id="slides">
                    <!-- Slides populated by JS -->
                </div>

                <!-- overlay notification centered -->
                <div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-labelledby="ovTitle">
                    <h3 id="ovTitle">Hello My Love! ðŸ’—</h3>
                    <p>I hope u like it, Even if itâ€™s simple, hehe.</p>
                    <button id="startBtn" class="btn-outline start">Start Exploring</button>
                </div>

                <!-- arrows -->
                <div id="leftArrow" class="arrow left" title="Previous">&#10094;</div>
                <div id="rightArrow" class="arrow right" title="Next">&#10095;</div>

                <!-- dots -->
                <div class="indicators" id="indicators"></div>
            </div>

            <!-- bottom small next button (scrolled to view) -->
            <div style="width:100%; display:flex; justify-content:center; margin-top:12px;">
                <button id="toPage3" class="next-bottom" style="display:none;">Next</button>
            </div>
        </section>

        <!-- PAGE 3 -->
        <section id="page3" class="">
            <div class="card music-card" style="text-align:center;">
                <div style="font-weight:800; font-size:18px; margin-bottom:8px; color:var(--pink-strong)">For you
                </div>
                <div id="musicArea" style="display:flex; flex-direction:column; align-items:center;">
                    <!-- if spotify links provided, iframes will show -->
                    <iframe id="sp1" class="music-embed" style="display:none" src="" allow="encrypted-media"></iframe>
                    <iframe id="sp2" class="music-embed" style="display:none" src="" allow="encrypted-media"></iframe>
                    <iframe id="sp3" class="music-embed" style="display:none" src="" allow="encrypted-media"></iframe>
                </div>

                <div class="short-msg" id="shortMsg" style="margin-top:12px; text-align:left;"></div>

                <div style="display:flex; justify-content:center; margin-top:14px;">
                    <button id="toPage4" class="next-bottom">Next (Are you ready?)</button>
                </div>
            </div>
        </section>

        <!-- PAGE 4 -->
        <section id="page4" class="">
            <div class="final-card">
                <div class="final-title">For my love of my life</div>
                <div id="finalMessage" class="typewriter"></div>
            </div>
        </section>

    </div>

    <script>
        /* ================================
           CONFIG (Edit these values)
           - Put your images (up to 10) in the same folder as this HTML
             or use online URLs. Example local names: "1.jpg", "2.jpg", ...
           - Put Spotify track links (full share link) in SPOTIFY array.
           - Edit shortMessage and finalMessage text.
           ================================== */

        const SECRET = "110420"; // secret code

        // IMAGES: add up to 10 items. Use local filenames (same folder) or full URLs.
        const IMAGES = [
            "img/c3ea5d28-af6c-45c4-892a-84b19903db42.jpg",
            "img/f572de6a-d6a0-445e-b235-aea8b29651bc.jpg",
            "img/e4cd8b92-d894-4041-9790-a90df570841a.jpg",
            "img/f2844702-1d68-44c0-b547-3da98e0d806b.jpg",
            "img/ddc37e9e-0661-4fbd-8244-8042e4e670c2.jpg",
            "img/1a3d6a8c-eef8-4fc4-85db-50a4f5178028.jpg",
            "img/1dd843ca-4880-4cd9-be11-b5c922862914.jpg",
            "img/581fe2e9-247f-4f08-b52d-d49a9eeb870b.jpg",
            "img/989ebce2-6b8e-4ec4-86a8-52094a517f6a.jpg",
            "img/5449c228-9c98-47ce-9c08-90a21a7969fa.jpg",
        ].filter(Boolean); // remove empty entries if any

        // SHORT message on page 3 (under music)
        const shortMessage = `The songs made for you, the ones that become ours whenever we play them together.\n\nI like the way you turn normal days into something I look forward to. You bring a kind of peace I didnâ€™t know existed.`;

        // FINAL (long) love letter; typewriter will show this.
        const finalMessage = `Hi love, 

I don't know where to start from here, but anyways, I know na this is super late na nito and tapos na ang monthsary natin. I hope you never feel unloved or like youâ€™re just 
"there", because you mean so much to me. Gusto ko bumawi sabi ko diba? Hehe, eto na â€™yon kaso late. Sana ma-appreciate mo pa rin at magustuhan mo.

So dito na mag-start. Ayon, tagal na natin. We're almost 2 yrs na, konti nalang and we can finally have our 2nd anniversary. Grabe no? Tagal na natin pero going strong pa rin, na parang kala mo minsan walang problema or nakakalimutan na nga natin yung problema e, kasi ang dalang nalang natin mag-away unlike dati. Siguro ganon talaga habang tumatagal, pero siguro di sa iba? Pero satin, working siya at okay ako don kasi ayoko din naman nag-aaway tayo, arghhh.

Andami kong gustong sabihin pero hindi ko ma-express lahat, my mind going blank. Pero ayon, I hope this doesnâ€™t end, and I hope we last even longer. Ayun lang gusto ko kasi I love you so muchhh. Hindi ko alam ano mangyayari sakin kung wala ka, hindi ko alam kung magiging ako yung ngayon kung wala ka sakin. U mean so much to me, like fr, halos ikaw nga may buong ambag sa buhay ko na e. Kaya thankful ako na nakilala talaga kita at ikaw yung naging gf ko. Wala na ko hihilingin pa or hahanapin pa talaga, kasi full packaged ka na e. Sheena na yan o. Todo magmahal, masarap magmahal. Pagmamahal mo lang nais ko at hindi sa kanila, kaya wag ka mag-alala kasi ikaw lang talaga mamahalin ko. Mahal na mahal kaya kita, ikaw lang yung pinakamahal ko, arghhh, haiz.

Til now, alam mo ba, pag parang tinatravel ko yung mind ko sa past, kung pano tayo nagkakilala sa kung ano tayo ngayon, may smth talaga e na hindi ko rin alam or parang makapaniwala. Kasi isipin mo, Ome lang tayo nagkakilala na akala ko tropa ko, tapos mamahalin ko pala ng sobra sobra?!!! Wtf. Expect the unexpected talaga, potik kulit e no. Pero at the same time ang galing saka buti nalang. Alam mo ba, I can't imagine you with someone else talaga. Nasa isip-isip ko kasi parang di bagay, pero pag sakin hehe alam mo na HAHAHA. Pero ayon, kasi kaya di ka pwede sa iba â€” sakin ka lang, mine only. Lock-in na ko sayo kaya humanda ka, hehe.

Ngapala hehe, alam mo ba bat ko pinipilit na dalhin mo na sainyo yung eco bag ni tita? Hehe, kasi di mo madadala gift q sayo. Alam kong di mo malalagay sa bag mo yan, ayon, wala, cute siya, kaya I hope you like it and also the keychain, hihi. Excuse ko lang yung kako panonoorin ko ang Demon Slayer tinanong ko lang talaga sino bias mo para ma-order ko, argh!!! Wala, cute, feel ko bagay yan sayo, knowing naman na lahat ng bagay e bagay sayo fr fr. Kaya sayo ako e, napakaganda mo kasi. Higit pa sa kagandahan yung ganda mo e. If there's a definition of beauty, ikaw yon! Wag mong sasabihin na hindi mo bet mukha mo, kasi ako, bet na bet ko yan. Ang sarap pa kiss kahit minsan ang powder masyado ng mukha mo, pero okay lang, at least nakikiss ko yung face mo na ako lang ang pwede, arghh.

Nauubusan na ko ng idea HAHAHAHAHA pero ayon, puro "ayon" no? HAHAHAHAH. Iloveyouu. Sana magustuhan mo kahit simple lang ihhh. Bawi pa q pag, u knoe, may work work na tayo, ako bahala sayo.

Take care always. Eat on time. Take care of yourself for our future, because weâ€™re going to last for a very long time. I love you. once again, love belated monthsary greeting, but my feelings are always on time ðŸ˜ðŸ˜‰`;

        // SPOTIFY LINKS (put Share -> Copy Song Link here). Leave empty strings for unused slots.
        const SPOTIFY = [
            "https://open.spotify.com/track/1t2gvCG4jH1kYE9sX2PrRs?si=6b36d87c8ad74f74", // e.g. "https://open.spotify.com/track/xxxxx"
            "https://open.spotify.com/track/5mi8Oe95frx6LhvFioXE7t?si=1ca0e56c79fd4529",
            "https://open.spotify.com/track/1EP2WyCX9Q7y24bKPSZ0tc?si=928c4426edec4436"
        ];

        /* ===============================
           END CONFIG
           =============================== */

        /* ---------- small WebAudio sounds ----------
           success: gentle ascending beep
           error: short low beep
        -------------------------------------------- */
        function playTone(type) {
            try {
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                const o = ctx.createOscillator();
                const g = ctx.createGain();
                o.connect(g); g.connect(ctx.destination);
                if (type === 'success') {
                    o.type = 'sine';
                    o.frequency.setValueAtTime(600, ctx.currentTime);
                    o.frequency.linearRampToValueAtTime(1200, ctx.currentTime + 0.22);
                    g.gain.setValueAtTime(0.0001, ctx.currentTime);
                    g.gain.exponentialRampToValueAtTime(0.08, ctx.currentTime + 0.02);
                    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.45);
                    o.start();
                    o.stop(ctx.currentTime + 0.45);
                } else {
                    o.type = 'sine';
                    o.frequency.setValueAtTime(280, ctx.currentTime);
                    g.gain.setValueAtTime(0.0001, ctx.currentTime);
                    g.gain.exponentialRampToValueAtTime(0.09, ctx.currentTime + 0.01);
                    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.16);
                    o.start();
                    o.stop(ctx.currentTime + 0.18);
                }
            } catch (e) {
                // mute if audio blocked
                console.log('audio err', e);
            }
        }

        /* ---------- DOM refs ---------- */
        const page1 = document.getElementById('page1');
        const page2 = document.getElementById('page2');
        const page3 = document.getElementById('page3');
        const page4 = document.getElementById('page4');
        const banner = document.getElementById('banner');
        const enterBtn = document.getElementById('enterBtn');
        const codeInput = document.getElementById('codeInput');
        const overlay = document.getElementById('overlay');
        const startBtn = document.getElementById('startBtn');
        const slidesContainer = document.getElementById('slides');
        const indicators = document.getElementById('indicators');
        const leftArrow = document.getElementById('leftArrow');
        const rightArrow = document.getElementById('rightArrow');
        const toPage3 = document.getElementById('toPage3');
        const toPage4 = document.getElementById('toPage4');
        const sp1 = document.getElementById('sp1');
        const sp2 = document.getElementById('sp2');
        const sp3 = document.getElementById('sp3');
        const shortMsgEl = document.getElementById('shortMsg');
        const finalMessageEl = document.getElementById('finalMessage');
        const overlayEl = document.getElementById('overlay');

        /* ---------- Helpers ---------- */
        function showBanner(text) {
            banner.textContent = text;
            banner.style.display = 'block';
            banner.style.opacity = '1';
            banner.style.transform = 'translateX(-50%)';
            setTimeout(() => {
                banner.style.transition = 'opacity 400ms';
                banner.style.opacity = '0';
                setTimeout(() => banner.style.display = 'none', 450);
            }, 2200);
        }

        /* ---------- PAGE 1 logic ---------- */
        function checkCode() {
            const val = codeInput.value.trim();
            if (val === SECRET) {
                playTone('success');
                goToPage2();
            } else {
                playTone('error');
                showBanner("Oops!!! Wrong Secret Code, Baby ðŸ’—");
                // shake input
                codeInput.animate([{ transform: 'translateX(0)' }, { transform: 'translateX(-8px)' }, { transform: 'translateX(8px)' }, { transform: 'translateX(0)' }], { duration: 300 });
            }
        }

        /* ---------- PAGE 2 (carousel) ---------- */
        let current = 0;
        let slideElements = [];
        let dotElements = [];
        let autoplayTimer = null;

        function buildSlides() {
            slidesContainer.innerHTML = '';
            indicators.innerHTML = '';
            slideElements = [];
            dotElements = [];
            if (!IMAGES || IMAGES.length === 0) {
                slidesContainer.innerHTML = `<div class="slide show"><div style="padding:20px; font-weight:800; color:var(--muted)">No images yet. Add images to IMAGES array in the code.</div></div>`;
                return;
            }
            IMAGES.forEach((src, i) => {
                const s = document.createElement('div');
                s.className = 'slide';
                s.dataset.index = i;
                const img = document.createElement('img');
                img.src = src;
                img.alt = `photo-${i + 1}`;
                // small fallback if image missing
                img.onerror = () => { img.style.filter = 'grayscale(40%)'; img.style.opacity = '0.6'; };
                s.appendChild(img);
                slidesContainer.appendChild(s);
                slideElements.push(s);

                const d = document.createElement('div');
                d.className = 'dot';
                d.dataset.index = i;
                d.addEventListener('click', () => { gotoSlide(i); });
                indicators.appendChild(d);
                dotElements.push(d);
            });
            gotoSlide(0, true);
        }

        function gotoSlide(i, instant) {
            if (!slideElements.length) return;
            slideElements.forEach((el, idx) => {
                el.classList.toggle('show', idx === i);
            });
            dotElements.forEach((d, idx) => d.classList.toggle('active', idx === i));
            current = i;
            resetAutoplay();
        }

        function prevSlide() { gotoSlide((current - 1 + slideElements.length) % slideElements.length); }
        function nextSlide() { gotoSlide((current + 1) % slideElements.length); }

        function resetAutoplay() {
            if (autoplayTimer) clearInterval(autoplayTimer);
            autoplayTimer = setInterval(() => nextSlide(), 4200); // auto advance every 4.2s
        }

        /* ---------- overlay control ---------- */
        function showOverlay() {
            overlay.classList.add('show');
            // center overlay (already positioned absolute)
        }
        function hideOverlay() {
            overlay.classList.remove('show');
            setTimeout(() => overlay.style.display = 'none', 380);
        }

        /* ---------- navigation between pages ---------- */
        function goToPage2() {
            page1.style.display = 'none';
            page2.style.display = 'flex';
            buildSlides();
            // overlay visible
            overlay.style.display = 'block';
            setTimeout(() => overlay.classList.add('show'), 70);
            // hide "Next" until user clicks Start Exploring
            toPage3.style.display = 'none';
        }

        function startExploring() {
            hideOverlay();
            // show small next button after a bit so user scrolls
            setTimeout(() => toPage3.style.display = 'inline-block', 900);
        }

        function goToPage3() {
            page2.style.display = 'none';
            page3.style.display = 'block';
            // populate short message
            shortMsgEl.textContent = shortMessage;
            // spotify frames
            setSpotify(sp1, SPOTIFY[0]);
            setSpotify(sp2, SPOTIFY[1]);
            setSpotify(sp3, SPOTIFY[2]);
            // Scroll a bit so next button is lower (user must scroll)
            setTimeout(() => window.scrollTo({ top: 0, behavior: 'smooth' }), 80);
        }

        function goToPage4() {
            page3.style.display = 'none';
            page4.style.display = 'block';
            startTypewriter(finalMessage);
            setTimeout(() => window.scrollTo({ top: 0, behavior: 'smooth' }), 80);
        }

        /* ---------- spotify embed helper ---------- */
        function setSpotify(iframeEl, link) {
            if (!link || link.trim() === "") { iframeEl.style.display = 'none'; return; }
            try {
                const u = new URL(link);
                const parts = u.pathname.split('/').filter(Boolean); // ["track","id"]
                if (parts.length >= 2) {
                    const type = parts[0], id = parts[1];
                    iframeEl.src = `https://open.spotify.com/embed/${type}/${id}`;
                    iframeEl.style.display = 'block';
                } else {
                    iframeEl.style.display = 'none';
                }
            } catch (e) {
                iframeEl.style.display = 'none';
            }
        }

        /* ---------- typewriter for final message ---------- */
        function startTypewriter(text) {
            finalMessageEl.textContent = '';
            let i = 0;
            function step() {
                if (i < text.length) {
                    finalMessageEl.textContent += text.charAt(i);
                    i++;
                    let delay = 13; // medium speed
                    if (text.charAt(i - 1) === '\n') delay = 240;
                    setTimeout(step, delay);
                }
            }
            step();
        }

        /* ---------- event listeners ---------- */
        enterBtn.addEventListener('click', checkCode);
        codeInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') checkCode(); });
        startBtn.addEventListener('click', () => { playTone('success'); startExploring(); });
        leftArrow.addEventListener('click', () => { playTone('success'); prevSlide(); });
        rightArrow.addEventListener('click', () => { playTone('success'); nextSlide(); });
        toPage3.addEventListener('click', () => { playTone('success'); goToPage3(); });
        toPage4.addEventListener('click', () => { playTone('success'); goToPage4(); });

        /* pause autoplay while overlay shown or on hover */
        document.querySelector('.carousel-wrap').addEventListener('mouseenter', () => { if (autoplayTimer) clearInterval(autoplayTimer); });
        document.querySelector('.carousel-wrap').addEventListener('mouseleave', () => { resetAutoplay(); });

        /* keyboard arrow navigation */
        document.addEventListener('keydown', (e) => {
            if (page2.style.display !== 'none') {
                if (e.key === 'ArrowLeft') prevSlide();
                if (e.key === 'ArrowRight') nextSlide();
            }
        });

        /* init */
        (function init() {
            // show page1 by default (already visible)
            page1.style.display = 'block';
            page2.style.display = 'none';
            page3.style.display = 'none';
            page4.style.display = 'none';
            // populate IMAGES slides on load (but only when page2 shown we build)
            window.SPOTIFY = SPOTIFY; // expose for use
        })();
    </script>
</body>

</html>